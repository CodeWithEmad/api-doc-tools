# Config file for automatic testing at travis-ci.org

language: python

env:
  global:
    - COMMAND=tox

matrix:
  include:
    - python: 3.5
      env: TOXENV=django111
    - python: 3.6
      env: TOXENV=django111
    - python: 3.5
      env: TOXENV=django20
    - python: 3.6
      env: TOXENV=django20
    - python: 3.6
      env: TOXENV=docs
    - python: 3.6
      env:
        - COMMAND="make quality"
        - PIPEXTRA="-r requirements/quality.txt"
        - DEPLOY_PYPI=true

cache:
  - pip

before_install:
  - pip install --upgrade pip

install:
  - pip install -r requirements/travis.txt $PIPEXTRA

script:
  - $COMMAND

after_success:
  - codecov

deploy:
  provider: pypi
  user: "__token__"
  distributions: sdist bdist_wheel
  on:
    tags: true
    condition: '$DEPLOY_PYPI = true'
  password:
    secure: "NWq4j/gFq2Sk5HKYfXhyqyFnbSeQJDTA7ao0KekJ1HTfhv65gN8XIel85//9AbS4xgz0iPvVr1PZNY6Ddoy9t8n2W4mihjXvKxW2N5Q+XjTClPPxejChfvPt8vKhd03Mw0X07McJ/DdBM+RT+T/oH0dD2YzbxtkrxwBvi4zPepqs+4drPZbBWFsQPeAw9adZkQkgBW3fm2RDXww8iQs5dGunHo8FcC2oHLS5sB8N3mhY0ED7NRLn1OzZmxHg7y826SpBaGNtGKj8k7fU0KA2YfxHqfhNxzGsBh1Qj80aUtgBI2uXtSN5UIxRuEJ204FanZANuYlSQec1YaFqiw6f0DMau7TvHvENWVhvhArJBqWYWVwB4jL/A1j8lzBURfEvYkm7hiCqF4gQMiu3gbrO/i+cRI0C1pbZreYnh3vlY0DdSWGcApFXsQxCpPbZBYkNeuGs7P626kWjeA8iDtFJT38wK+OBtDeNc0hwxkdCxcov+Y0aWNlhbxoHx/gJqfiirKSDhpx8vM+h9/fUQ5WiXAr5ZYFA0uxAKrSZcbJ1N7Eb+Nj6nadYw/WwP1PXhXQAwRaFFJzG5jPwP67WDuVjyy98BM3HvqcYLn29ZXrsdhMrdsKVDu4Yg3hXUOeO2yOhT6uvcMqlWl+b5NgT4DPCZ04/4NqwMJWa6CxX/cnMXOc="
